<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Rank Shift Plot — gg_rankshift • ggrecipes</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Rank Shift Plot — gg_rankshift"><meta name="description" content="Creates a three-panel visualization comparing ranks of samples between two
groups. Left and right panels show distributions (bars or boxplots) for each
group ordered by rank. The center panel displays connecting lines colored by
rank change direction, revealing which samples improved, declined, or
maintained their relative position."><meta property="og:description" content="Creates a three-panel visualization comparing ranks of samples between two
groups. Left and right panels show distributions (bars or boxplots) for each
group ordered by rank. The center panel displays connecting lines colored by
rank change direction, revealing which samples improved, declined, or
maintained their relative position."><meta property="og:image" content="https://ignophi.github.io/ggrecipes/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggrecipes</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/ggrecipes.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Ignophi/ggrecipes/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Rank Shift Plot</h1>
      <small class="dont-index">Source: <a href="https://github.com/Ignophi/ggrecipes/blob/main/R/gg_rankshift.R" class="external-link"><code>R/gg_rankshift.R</code></a></small>
      <div class="d-none name"><code>gg_rankshift.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates a three-panel visualization comparing ranks of samples between two
groups. Left and right panels show distributions (bars or boxplots) for each
group ordered by rank. The center panel displays connecting lines colored by
rank change direction, revealing which samples improved, declined, or
maintained their relative position.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">gg_rankshift</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  id <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>  group <span class="op">=</span> <span class="st">"group"</span>,</span>
<span>  value <span class="op">=</span> <span class="st">"value"</span>,</span>
<span>  style <span class="op">=</span> <span class="st">"box"</span>,</span>
<span>  fill <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.7</span>,</span>
<span>  line_alpha <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  line_width <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  panel_ratio <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  text_size <span class="op">=</span> <span class="fl">11</span>,</span>
<span>  show_points <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  point_size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  point_shape <span class="op">=</span> <span class="fl">21</span>,</span>
<span>  point_alpha <span class="op">=</span> <span class="fl">0.7</span>,</span>
<span>  stat_summary <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>  decreasing <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  free_x <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  rank_change_colors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>increase <span class="op">=</span> <span class="st">"#d73027"</span>, decrease <span class="op">=</span> <span class="st">"#4575b4"</span>, no_change <span class="op">=</span></span>
<span>    <span class="st">"grey50"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data frame containing the data to visualize.</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>Character string specifying the column name in <code>data</code> that
contains sample identifiers. Default is "id".</p></dd>


<dt id="arg-group">group<a class="anchor" aria-label="anchor" href="#arg-group"></a></dt>
<dd><p>Character string specifying the column name in <code>data</code> that
defines the two groups to compare. Must contain exactly 2 unique values.
Default is "group".</p></dd>


<dt id="arg-value">value<a class="anchor" aria-label="anchor" href="#arg-value"></a></dt>
<dd><p>Character string specifying the column name in <code>data</code> that
contains the numeric values used for ranking. Default is "value".</p></dd>


<dt id="arg-style">style<a class="anchor" aria-label="anchor" href="#arg-style"></a></dt>
<dd><p>Character string specifying visualization type: <code>"bar"</code> for
barplots or <code>"box"</code> for boxplots. Default is "box".</p></dd>


<dt id="arg-fill">fill<a class="anchor" aria-label="anchor" href="#arg-fill"></a></dt>
<dd><p>Character vector of length 2 specifying fill colors for
the two groups. If NULL (default), uses <code>c("#92b9de", "#e8927c")</code>.</p></dd>


<dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p>Numeric value (0-1) specifying transparency of bars/boxes.
Default is 0.7.</p></dd>


<dt id="arg-line-alpha">line_alpha<a class="anchor" aria-label="anchor" href="#arg-line-alpha"></a></dt>
<dd><p>Numeric value (0-1) specifying transparency of connecting
lines. Default is 0.5.</p></dd>


<dt id="arg-line-width">line_width<a class="anchor" aria-label="anchor" href="#arg-line-width"></a></dt>
<dd><p>Numeric value specifying width of connecting lines.
Default is 0.3.</p></dd>


<dt id="arg-panel-ratio">panel_ratio<a class="anchor" aria-label="anchor" href="#arg-panel-ratio"></a></dt>
<dd><p>Numeric value specifying the relative width of the center
line panel compared to side panels (which have width 1). Default is 1.</p></dd>


<dt id="arg-text-size">text_size<a class="anchor" aria-label="anchor" href="#arg-text-size"></a></dt>
<dd><p>Numeric value specifying the base size for axis text.
Default is 11.</p></dd>


<dt id="arg-show-points">show_points<a class="anchor" aria-label="anchor" href="#arg-show-points"></a></dt>
<dd><p>Logical indicating whether to overlay individual data
points on bars/boxes. Default is TRUE.</p></dd>


<dt id="arg-point-size">point_size<a class="anchor" aria-label="anchor" href="#arg-point-size"></a></dt>
<dd><p>Numeric value specifying size of points when
<code>show_points = TRUE</code>. Default is 1.</p></dd>


<dt id="arg-point-shape">point_shape<a class="anchor" aria-label="anchor" href="#arg-point-shape"></a></dt>
<dd><p>Numeric value (0-25) specifying point shape when
<code>show_points = TRUE</code>. Default is 21 (filled circle).</p></dd>


<dt id="arg-point-alpha">point_alpha<a class="anchor" aria-label="anchor" href="#arg-point-alpha"></a></dt>
<dd><p>Numeric value (0-1) specifying transparency of points when
<code>show_points = TRUE</code>. Default is 0.7.</p></dd>


<dt id="arg-stat-summary">stat_summary<a class="anchor" aria-label="anchor" href="#arg-stat-summary"></a></dt>
<dd><p>Character string specifying the summary statistic used
for ranking: <code>"mean"</code> or <code>"median"</code>. Default is "mean".</p></dd>


<dt id="arg-decreasing">decreasing<a class="anchor" aria-label="anchor" href="#arg-decreasing"></a></dt>
<dd><p>Logical indicating rank order direction. If TRUE, higher
values receive lower rank numbers (rank 1 = highest value). If FALSE,
lower values receive lower rank numbers. Default is FALSE.</p></dd>


<dt id="arg-free-x">free_x<a class="anchor" aria-label="anchor" href="#arg-free-x"></a></dt>
<dd><p>Logical indicating whether x-axes are independent between
panels. If FALSE, both panels share the same x-axis limits. Default is TRUE.</p></dd>


<dt id="arg-rank-change-colors">rank_change_colors<a class="anchor" aria-label="anchor" href="#arg-rank-change-colors"></a></dt>
<dd><p>Named character vector of length 3 specifying
colors for rank changes. Must contain names <code>"increase"</code>,
<code>"decrease"</code>, and <code>"no_change"</code>. Default is
<code>c(increase = "#d73027", decrease = "#4575b4", no_change = "grey50")</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A patchwork object combining three plots: left panel showing the first
group's distribution, center panel showing rank change lines, and right
panel showing the second group's distribution. Line colors indicate whether
samples increased in rank (moved up), decreased in rank (moved down), or
maintained the same rank between groups.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function identifies samples common to both groups, calculates summary
statistics (mean or median) for each sample within each group, and assigns
ranks based on these values. Samples are then displayed in rank order with
connecting lines showing how ranks changed between groups.</p>
<p>When <code>style = "box"</code> and <code>show_points = TRUE</code>, boxplots display
the distribution while individual points show all replicates. This is useful
for visualizing measurement variability alongside rank changes.</p>
<p>The <code>decreasing</code> parameter controls ranking direction:</p><ul><li><p><code>FALSE</code> (default): Rank 1 = lowest value, higher ranks =
higher values</p></li>
<li><p><code>TRUE</code>: Rank 1 = highest value, lower ranks = lower values</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Example data: bacterial strain growth rate control vs antibiotic treated</span></span></span>
<span class="r-in"><span><span class="va">growth_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  strain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Strain"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">13</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">6</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  condition <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Control"</span>, <span class="st">"Treated"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">3</span>, times <span class="op">=</span> <span class="fl">13</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  growth_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">39</span>, mean <span class="op">=</span> <span class="fl">0.85</span>, sd <span class="op">=</span> <span class="fl">0.12</span><span class="op">)</span>,  <span class="co"># Control</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">39</span>, mean <span class="op">=</span> <span class="fl">0.45</span>, sd <span class="op">=</span> <span class="fl">0.10</span><span class="op">)</span>   <span class="co"># Treated (reduced growth)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Basic rank shift plot</span></span></span>
<span class="r-in"><span><span class="fu">gg_rankshift</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">growth_data</span>,</span></span>
<span class="r-in"><span>  id <span class="op">=</span> <span class="st">"strain"</span>,</span></span>
<span class="r-in"><span>  group <span class="op">=</span> <span class="st">"condition"</span>,</span></span>
<span class="r-in"><span>  value <span class="op">=</span> <span class="st">"growth_rate"</span>,</span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="gg_rankshift-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With barplots instead of boxplots</span></span></span>
<span class="r-in"><span><span class="fu">gg_rankshift</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">growth_data</span>,</span></span>
<span class="r-in"><span>  id <span class="op">=</span> <span class="st">"strain"</span>,</span></span>
<span class="r-in"><span>  group <span class="op">=</span> <span class="st">"condition"</span>,</span></span>
<span class="r-in"><span>  value <span class="op">=</span> <span class="st">"growth_rate"</span>,</span></span>
<span class="r-in"><span>  style <span class="op">=</span> <span class="st">"bar"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="gg_rankshift-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Custom styling</span></span></span>
<span class="r-in"><span><span class="fu">gg_rankshift</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">growth_data</span>,</span></span>
<span class="r-in"><span>  id <span class="op">=</span> <span class="st">"strain"</span>,</span></span>
<span class="r-in"><span>  group <span class="op">=</span> <span class="st">"condition"</span>,</span></span>
<span class="r-in"><span>  value <span class="op">=</span> <span class="st">"growth_rate"</span>,</span></span>
<span class="r-in"><span>  fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#e41a1c"</span>, <span class="st">"#377eb8"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  rank_change_colors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    increase <span class="op">=</span> <span class="st">"#1b9e77"</span>,</span></span>
<span class="r-in"><span>    decrease <span class="op">=</span> <span class="st">"#d95f02"</span>,</span></span>
<span class="r-in"><span>    no_change <span class="op">=</span> <span class="st">"#7570b3"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  panel_ratio <span class="op">=</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>  point_size <span class="op">=</span> <span class="fl">2.5</span>,</span></span>
<span class="r-in"><span>  line_width <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  decreasing <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="gg_rankshift-3.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ignophi Hu.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

